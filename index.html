<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Nuestro 16 ‚ù§Ô∏è Pichuchis</title>
    <link href="https://fonts.googleapis.com/css2?family=Dancing+Script:wght@700&family=Pacifico&family=Quicksand:wght@400;700&display=swap" rel="stylesheet">
    
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-database.js"></script>

    <style>
        :root { --pink: #fb6f92; --soft: #fff0f3; }
        * { margin: 0; padding: 0; box-sizing: border-box; font-family: 'Quicksand', sans-serif; }
        body { background: var(--soft); overflow: hidden; height: 100vh; color: #5e414d; }
        
        /* Fondo */
        #bg { position: fixed; top: 0; left: 0; z-index: -1; width: 100%; height: 100%; }

        /* Men√∫ Inferior */
        nav {
            position: fixed; bottom: 20px; left: 50%; transform: translateX(-50%);
            background: white; padding: 10px 20px; border-radius: 50px;
            display: flex; gap: 15px; z-index: 100; box-shadow: 0 10px 25px rgba(0,0,0,0.1);
        }
        nav button { background: none; border: none; color: var(--pink); font-weight: 700; cursor: pointer; font-size: 0.7rem; }

        /* Ventanas */
        .page {
            position: absolute; width: 100%; height: 100vh; 
            display: none; flex-direction: column; align-items: center; justify-content: center;
            padding: 20px; text-align: center;
        }
        .page.active { display: flex; animation: fade 0.5s ease; }
        @keyframes fade { from { opacity: 0; } to { opacity: 1; } }

        /* Reloj */
        .timer { background: white; padding: 25px; border-radius: 30px; box-shadow: 0 10px 30px rgba(251,111,146,0.2); }
        .grid { display: flex; gap: 15px; }
        .num { font-size: 2rem; font-weight: 700; color: var(--pink); display: block; }
        .label { font-size: 0.6rem; color: #888; }

        /* Fotos Polaroid */
        .gallery { display: flex; flex-wrap: wrap; justify-content: center; gap: 15px; overflow-y: auto; max-height: 55vh; width: 100%; }
        .polaroid { 
            background: white; padding: 10px 10px 30px 10px; box-shadow: 0 5px 15px rgba(0,0,0,0.1); 
            width: 140px; transform: rotate(var(--r)); margin: 10px;
        }
        .polaroid img { width: 100%; height: 120px; object-fit: cover; }

        /* Botones */
        .btn { background: var(--pink); color: white; border: none; padding: 12px 25px; border-radius: 50px; font-weight: 700; cursor: pointer; margin: 10px; }
        .playlist { background: white; width: 100%; max-width: 300px; border-radius: 15px; max-height: 150px; overflow-y: auto; margin-top: 10px; }
        .song { padding: 10px; border-bottom: 1px solid #eee; cursor: pointer; font-size: 0.8rem; }
    </style>
</head>
<body onclick="pop(event)">

    <canvas id="bg"></canvas>

    <nav>
        <button onclick="show(0)">INICIO</button>
        <button onclick="show(1)">M√öSICA</button>
        <button onclick="show(2)">√ÅLBUM</button>
    </nav>

    <div class="page active" id="p0">
        <h1 style="font-family:'Dancing Script'; font-size: 4rem; color: var(--pink);">Te amo Pichuchis</h1>
        <div class="timer">
            <div class="grid">
                <div><span class="num" id="d">0</span><span class="label">D√çAS</span></div>
                <div><span class="num" id="h">0</span><span class="label">HRS</span></div>
                <div><span class="num" id="m">0</span><span class="label">MIN</span></div>
                <div><span class="num" id="s">0</span><span class="label">SEG</span></div>
            </div>
        </div>
        <p style="margin-top:20px; font-size:0.8rem; font-weight:700;">DESDE EL 16-11-2025 ‚ù§Ô∏è</p>
    </div>

    <div class="page" id="p1">
        <h2 style="font-family:'Pacifico'; color:var(--pink);">Nuestras Canciones</h2>
        <audio id="player" controls style="margin:20px;"></audio>
        <button class="btn" onclick="document.getElementById('m-in').click()">A√ëADIR M√öSICA</button>
        <input type="file" id="m-in" accept="audio/*" style="display:none">
        <div class="playlist" id="songs"></div>
    </div>

    <div class="page" id="p2">
        <button class="btn" onclick="document.getElementById('p-in').click()">SUBIR FOTO üì∏</button>
        <input type="file" id="p-in" accept="image/*" style="display:none">
        <div class="gallery" id="album"></div>
    </div>

    <script>
        // --- 1. CONFIGURACI√ìN FIREBASE (Pon tus datos aqu√≠ para que ella lo vea) ---
        const firebaseConfig = {
            apiKey: "TU_API_KEY",
            databaseURL: "TU_DATABASE_URL",
            projectId: "TU_PROJECT_ID"
        };
        
        let db;
        try {
            firebase.initializeApp(firebaseConfig);
            db = firebase.database();
        } catch(e) { console.log("Firebase pendiente de configurar"); }

        // --- 2. RELOJ (INCORRECTIBLE) ---
        const start = new Date('2025-11-16T00:00:00').getTime();
        function updateTime() {
            const now = Date.now();
            const diff = now - start;
            document.getElementById('d').innerText = Math.floor(diff / 86400000);
            document.getElementById('h').innerText = Math.floor((diff / 3600000) % 24).toString().padStart(2,'0');
            document.getElementById('m').innerText = Math.floor((diff / 60000) % 60).toString().padStart(2,'0');
            document.getElementById('s').innerText = Math.floor((diff / 1000) % 60).toString().padStart(2,'0');
        }
        setInterval(updateTime, 1000);
        updateTime();

        // --- 3. NAVEGACI√ìN ---
        function show(i) {
            document.querySelectorAll('.page').forEach((p, idx) => p.classList.toggle('active', i === idx));
        }

        // --- 4. FUNCIONES DE CARGA ---
        const album = document.getElementById('album');
        const songs = document.getElementById('songs');

        function renderFoto(data) {
            const div = document.createElement('div');
            div.className = 'polaroid';
            div.style.setProperty('--r', (Math.random()*10-5)+'deg');
            div.innerHTML = `<img src="${data.img}"><p style="font-family:'Dancing Script'; font-size:0.8rem; margin-top:5px;">Pichuchis ‚ù§Ô∏è</p>`;
            album.prepend(div);
        }

        function renderMusica(data) {
            const d = document.createElement('div'); d.className = 'song'; d.innerText = "üéµ " + data.name;
            d.onclick = () => { const a = document.getElementById('player'); a.src = data.src; a.play(); };
            songs.prepend(d);
        }

        document.getElementById('p-in').onchange = (e) => {
            const reader = new FileReader();
            reader.onload = (ev) => {
                const item = { img: ev.target.result };
                if(db) db.ref('fotos').push(item);
                else renderFoto(item);
            };
            reader.readAsDataURL(e.target.files[0]);
        };

        document.getElementById('m-in').onchange = (e) => {
            const file = e.target.files[0];
            const reader = new FileReader();
            reader.onload = (ev) => {
                const item = { name: file.name, src: ev.target.result };
                if(db) db.ref('musica').push(item);
                else renderMusica(item);
            };
            reader.readAsDataURL(file);
        };

        // Escuchar cambios de Firebase para que tu novia lo vea
        if(db) {
            db.ref('fotos').on('child_added', snap => renderFoto(snap.val()));
            db.ref('musica').on('child_added', snap => renderMusica(snap.val()));
        }

        // --- 5. EFECTOS VISUALES ---
        function pop(e) {
            const h = document.createElement('div');
            h.innerHTML = '‚ù§Ô∏è'; h.style.position = 'fixed'; h.style.left = e.clientX+'px'; h.style.top = e.clientY+'px';
            h.style.pointerEvents = 'none'; document.body.appendChild(h);
            h.animate([{transform:'scale(1)', opacity:1}, {transform:'translateY(-100px) scale(2)', opacity:0}], 1000).onfinish = () => h.remove();
        }

        const canv = document.getElementById('bg'); const ctx = canv.getContext('2d');
        canv.width = window.innerWidth; canv.height = window.innerHeight;
        let pts = Array.from({length:30}, () => ({x:Math.random()*canv.width, y:Math.random()*canv.height, s:Math.random()*0.5+0.2}));
        function draw() {
            ctx.clearRect(0,0,canv.width,canv.height); ctx.fillStyle = 'rgba(251, 111, 146, 0.2)';
            pts.forEach(p => { ctx.beginPath(); ctx.arc(p.x, p.y, 2, 0, 7); ctx.fill(); p.y-=p.s; if(p.y<-5) p.y=canv.height+5; });
            requestAnimationFrame(draw);
        }
        draw();
    </script>
</body>
</html>

